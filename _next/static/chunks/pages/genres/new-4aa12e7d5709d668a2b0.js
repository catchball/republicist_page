(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[246],{2135:function(e,r,n){"use strict";n.r(r),n.d(r,{default:function(){return m}});var t=n(5893),c=n(809),s=n.n(c),i=n(6265),o=n(2447),u=n(2292),a=n(7294),f=n(1163),l=n(5887),j=n(6829),p=n(7261);function h(){var e=(0,p.Z)(["\n  mutation ($name: String!) {\n    createGenre(name: $name) {\n      genre {\n        id\n        name\n      }\n    }\n  }\n"]);return h=function(){return e},e}var O=(0,n(3121).ZP)(h());function b(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);r&&(t=t.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),n.push.apply(n,t)}return n}function d(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?b(Object(n),!0).forEach((function(r){(0,i.Z)(e,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):b(Object(n)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))}))}return e}var g=function(e){var r=e.id,n=e.genre,c=e.onChange;return(0,t.jsx)(t.Fragment,{children:(0,t.jsx)(l.iA,{children:(0,t.jsxs)(l.RM,{children:[r&&(0,t.jsxs)(l.SC,{children:[(0,t.jsx)(l.xD,{children:"ID"}),(0,t.jsx)(l.C5,{children:r})]}),(0,t.jsxs)(l.SC,{children:[(0,t.jsx)(l.xD,{children:"\u540d\u524d"}),(0,t.jsx)(l.C5,{children:(0,t.jsx)(l.gN,{children:(0,t.jsx)(l.II,{value:n.name,onChange:function(e){return c(d(d({},n),{},{name:e.target.value}))}})})})]})]})})})},x=n(6146),v=n(9249);function y(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);r&&(t=t.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),n.push.apply(n,t)}return n}function w(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?y(Object(n),!0).forEach((function(r){(0,i.Z)(e,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):y(Object(n)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))}))}return e}var m=function(){var e=(0,a.useContext)(x.w).setError,r=(0,f.useRouter)(),n=(0,a.useState)({name:""}),c=n[0],i=n[1],p=(0,j.useMutation)(O),h=(0,u.Z)(p,1)[0],b=function(){var n=(0,o.Z)(s().mark((function n(){var t,o,u;return s().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,h({variables:w({},c)});case 2:if(t=n.sent,o=t.data,!(u=t.errors)||!u[0]){n.next=9;break}return console.log(u),e({message:u[0].message}),n.abrupt("return");case 9:o&&(i(o.createGenre.genre),r.push("/genres/")),v.Am.success("\u30ab\u30c6\u30b4\u30ea\u30fc\u306e\u767b\u9332\u306b\u6210\u529f\u3057\u307e\u3057\u305f");case 11:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();return(0,t.jsx)(t.Fragment,{children:(0,t.jsx)("main",{children:(0,t.jsxs)(l.W2,{children:[(0,t.jsxs)(l.$0,{children:[(0,t.jsx)("h1",{children:"\u65b0\u898f\u767b\u9332"}),(0,t.jsx)("div",{children:(0,t.jsx)(g,{genre:c,onChange:function(e){return i(w({},e))}})})]}),(0,t.jsx)(l.$0,{children:(0,t.jsx)(l.EK,{children:(0,t.jsx)(l.zx,{onClick:b,children:"\u767b\u9332"})})})]})})})}},7951:function(e,r,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/genres/new",function(){return n(2135)}])}},function(e){e.O(0,[774,888,179],(function(){return r=7951,e(e.s=r);var r}));var r=e.O();_N_E=r}]);