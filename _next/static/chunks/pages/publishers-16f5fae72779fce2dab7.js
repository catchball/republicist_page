(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[810],{6466:function(n,e,r){"use strict";r.d(e,{U:function(){return a},r:function(){return c}});var t=r(7261),s=r(3121);function i(){var n=(0,t.Z)(["\n  query publishers(\n    $baseUrl: String\n    $limit: Int\n    $offset: Int\n    $hasRssUrl: Boolean\n    $hasArticleListUrl: Boolean\n  ) {\n    publishers(\n      baseUrl: $baseUrl\n      limit: $limit\n      offset: $offset\n      hasRssUrl: $hasRssUrl\n      hasArticleListUrl: $hasArticleListUrl\n    ) {\n      id\n      name\n      description\n      baseUrl\n      crawlingRuleId\n      articleListUrl\n      rssUrl\n    }\n  }\n"]);return i=function(){return n},n}function l(){var n=(0,t.Z)(["\n  query publisher($id: Int!) {\n    publisher(id: $id) {\n      id\n      name\n      description\n      baseUrl\n      rssUrl\n      crawlingRuleId\n      articleListUrl\n      articleLinkXpath\n      articleUrlPattern\n      isLived\n      scrapings {\n        id\n        processor\n        publisherId\n        titleXpath\n        contentXpath\n        descriptionXpath\n        authorXpath\n        authorPattern\n        publishDateXpath\n        publishDatePattern\n        updateDateXpath\n        updateDatePattern\n        genreXpath\n        genrePattern\n        tagXpath\n        tagPattern\n        pagerXpath\n        testUrl\n      }\n    }\n  }\n"]);return l=function(){return n},n}var a=(0,s.ZP)(l()),c=(0,s.ZP)(i())},867:function(n,e,r){"use strict";var t=r(5893),s=(r(7294),r(5887));e.Z=function(n){var e=n.showButton,r=n.onClick;return(0,t.jsx)(t.Fragment,{children:e&&(0,t.jsx)(s.zx,{onClick:r,children:"\u7d9a\u304d\u3092\u8aad\u307f\u8fbc\u3080"})})}},4679:function(n,e,r){"use strict";var t=r(5893),s=r(8140);r(7294);e.Z=function(n){var e=n.name,r=n.items,i=n.state,l=n.onChange;return(0,t.jsx)(t.Fragment,{children:r.map((function(n,r){var a=n.value,c=n.label;return(0,t.jsxs)("label",{children:[(0,t.jsx)("input",{type:"checkbox",name:e,value:a,checked:i.includes(a),onChange:function(n){return l(n.target.checked?[].concat((0,s.Z)(i),[a]):i.filter((function(n){return n!=a})))}}),"\xa0",c]},r)}))})}},8056:function(n,e,r){"use strict";r.r(e);var t=r(5893),s=r(8140),i=r(2292),l=r(7294),a=r(1664),c=r(5887),u=r(6829),h=r(6466),o=r(8739),d=r(867),f=r(6146),x=r(4679);e.default=function(){var n=(0,l.useState)([]),e=n[0],r=n[1],p=(0,l.useState)({}),b=p[0],j=p[1],m=(0,l.useState)(0),U=m[0],v=m[1],g=(0,l.useState)(!0),L=g[0],Z=g[1],w=(0,u.useQuery)(h.r,{variables:{limit:50,hasRssUrl:b.hasRssUrl,hasArticleListUrl:b.hasArticleListUrl}}).data;(0,l.useEffect)((function(){w&&w.publishers&&(r(w.publishers),v(w.publishers.length),Z(50===w.publishers.length))}),[w]);var C=(0,u.useLazyQuery)(h.r),y=(0,i.Z)(C,2),R=y[0],S=y[1],A=S.data,$=S.called,_=S.loading;(0,l.useEffect)((function(){if($&&A)try{var n=[].concat((0,s.Z)(e),(0,s.Z)(A.publishers));r(n),v(n.length),Z(50===A.publishers.length)}catch(t){return}}),[A,$]);var k=(0,l.useContext)(f.w).setIsLoading;return(0,l.useEffect)((function(){k(_)}),[_,k]),(0,t.jsx)(t.Fragment,{children:(0,t.jsx)("main",{children:(0,t.jsx)(c.W2,{children:(0,t.jsxs)(c.$0,{children:[(0,t.jsx)("h1",{children:"\u30e1\u30c7\u30a3\u30a2\u4e00\u89a7"}),(0,t.jsxs)(c.EK,{children:[(0,t.jsx)(a.default,{href:"/publishers/new",children:(0,t.jsx)(c.zx,{children:"\u65b0\u898f\u767b\u9332"})}),(0,t.jsx)(a.default,{href:"/publishers/csv",children:(0,t.jsx)(c.zx,{children:"CSV\u53d6\u308a\u8fbc\u307f"})})]}),(0,t.jsx)(c.gN,{children:(0,t.jsx)(x.Z,{items:[{value:"hasRssUrl",label:"RSS"},{value:"hasArticleListUrl",label:"HTML"}],name:"filter",onChange:function(n){j({hasRssUrl:n.includes("hasRssUrl"),hasArticleListUrl:n.includes("hasArticleListUrl")})},state:["hasRssUrl","hasArticleListUrl"].filter((function(n){return b[n]}))})}),(0,t.jsxs)(c.iA,{className:"is-x-scrollable",children:[(0,t.jsx)(c.ss,{children:(0,t.jsxs)(c.SC,{children:[(0,t.jsx)(c.xD,{children:"Name"}),(0,t.jsx)(c.xD,{children:"URL"}),(0,t.jsx)(c.xD,{children:"\u30eb\u30fc\u30eb"}),(0,t.jsx)(c.xD,{children:"\u4e00\u89a7\u53d6\u5f97"}),(0,t.jsx)(c.xD,{children:"\u8a73\u7d30"})]})}),(0,t.jsx)(c.RM,{children:e.map((function(n){return(0,t.jsxs)(c.SC,{children:[(0,t.jsx)(c.C5,{children:n.name}),(0,t.jsx)(c.C5,{children:(0,t.jsx)("small",{children:n.baseUrl})}),(0,t.jsx)(c.C5,{children:(0,t.jsx)("small",{children:o.LQ[n.crawlingRuleId]})}),(0,t.jsxs)(c.C5,{children:[n.rssUrl&&(0,t.jsx)("small",{children:"RSS"}),n.articleListUrl&&(0,t.jsx)("small",{children:"HTML"})]}),(0,t.jsx)(c.C5,{children:(0,t.jsxs)(c.EK,{children:[(0,t.jsx)(a.default,{href:"/publishers/".concat(n.id),children:(0,t.jsx)(c.zx,{className:"is-small",children:"\u8a73\u7d30"})}),(0,t.jsx)("a",{href:"/publishers/".concat(n.id),target:"_blank",rel:"noreferrer",children:(0,t.jsx)(c.zx,{className:"is-small",children:"\u65b0\u898f\u30bf\u30d6"})}),(0,t.jsx)(a.default,{href:"/articles?publisherId=".concat(n.id),children:(0,t.jsx)(c.zx,{className:"is-small",children:"\u8a18\u4e8b\u4e00\u89a7"})})]})})]},n.id)}))})]}),(0,t.jsx)(c.EK,{children:(0,t.jsx)(d.Z,{showButton:L,onClick:function(){_||R({variables:{offset:U,limit:50}})}})})]})})})})}},8739:function(n,e,r){"use strict";r.d(e,{LQ:function(){return s},ro:function(){return i},eC:function(){return l},ti:function(){return a}});var t=r(2292),s={1:"\u901a\u5e38",2:"\u8457\u8005\u5225"},i=Object.entries(s).map((function(n){var e=(0,t.Z)(n,2),r=e[0],s=e[1];return{value:Number(r),label:s}})),l=Object.entries({lxml:"HTML\u89e3\u6790",selenium:"\u30d6\u30e9\u30a6\u30b6\u5229\u7528"}).map((function(n){var e=(0,t.Z)(n,2);return{value:e[0],label:e[1]}})),a="www.youtube.com"},7076:function(n,e,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/publishers",function(){return r(8056)}])},9391:function(n,e,r){"use strict";function t(n){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(n))return Array.from(n)}r.d(e,{Z:function(){return t}})},8140:function(n,e,r){"use strict";r.d(e,{Z:function(){return l}});var t=r(5093);var s=r(9391),i=r(355);function l(n){return function(n){if(Array.isArray(n))return(0,t.Z)(n)}(n)||(0,s.Z)(n)||(0,i.Z)(n)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}}},function(n){n.O(0,[774,888,179],(function(){return e=7076,n(n.s=e);var e}));var e=n.O();_N_E=e}]);